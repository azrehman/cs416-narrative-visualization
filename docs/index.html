<!DOCTYPE html>
<head>
    cs411 narrative visualization
</head>
<div id="container"></div>
<script type="module">
    console.log('hello');
    import * as d3 from 'https://cdn.jsdelivr.net/npm/d3@7/+esm';

    const dateParser = d3.timeParse('%Y-%m-%d');

    const data = d3
        .csv('../data/indexProcessed.csv', (d) => {
            return {
                index: d.Index,
                date: dateParser(d.Date),
                close: +d.CloseUSD,
            };
        })
        .then((data) => {
            const marketsData = {
                NYSE: data.filter(({ index }) => index == 'NYA'), // New York Stock Exchange
                NASDAQ: data.filter(({ index }) => index == 'IXIC'), // NASDAQ
                HKSE: data.filter(({ index }) => index == 'HSI'), // Hong Kong Stock Exchange
                TSE: data.filter(({ index }) => index == 'N225'), // Tokyo Stock Exchange
                EUR: data.filter(({ index }) => index == 'N100'), // Euronext
                NSEI: data.filter(({ index }) => index == 'NSEI'), // National Stock Exchange of India
            };
            console.log(typeof data);
            console.log(marketsData['NYSE']);
            console.log(marketsData['EUR']);
        });

    console.log('bye');
    // load data

    // const dataa = await d3;
    // .csv('../data/indexProcessed.csv')
    // .then((data) => {
    //   console.log(typeof data);
    //   console.log(data);
    // })
    // .catch((error) => {
    //   console.log(error);
    // });

    // Declare the chart dimensions and margins.
    // const width = 640;
    // const height = 400;
    // const margin = { top: 20, right: 30, bottom: 30, left: 40 };

    // // Declare the x (horizontal position) scale.
    // const x = d3
    //     .scaleUtc()
    //     .domain([new Date('2023-01-01'), new Date('2024-01-01')])
    //     .range([marginLeft, width - marginRight]);

    // // Declare the y (vertical position) scale.
    // const y = d3
    //     .scaleLinear()
    //     .domain([0, 100])
    //     .range([height - marginBottom, marginTop]);

    // // Create the SVG container.
    // const svg = d3.create('svg').attr('width', width).attr('height', height);

    // // Add the x-axis.
    // svg.append('g')
    //     .attr('transform', `translate(0,${height - marginBottom})`)
    //     .call(d3.axisBottom(x));

    // // Add the y-axis.
    // svg.append('g')
    //     .attr('transform', `translate(${marginLeft},0)`)
    //     .call(d3.axisLeft(y));

    // // Append the SVG element.
    // container.append(svg.node());
</script>
